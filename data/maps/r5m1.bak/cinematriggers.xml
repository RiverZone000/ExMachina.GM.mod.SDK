<?xml version="1.0" encoding="windows-1251" standalone="yes" ?>
<triggers>

<!-- 	*********Бродяга приехал, старт игры********		-->
	<trigger	Name="trBrodygaInMap"	active="1">
		<event eventid="GE_GAME_START" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			RuleConsole("cinematic_spring_coeff 1.7")

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()

			TActivate("trBrodygaInMap_FadeIn")

			Fly("Start_cam01", CINEMATIC_NO_AIM, 0, 2, 1, 0 )
			FlyLinked( "Start_cam02", PlfID , 3, 0, 0, PlfID, 1, 0, 0, 0)
			Fly("Start_cam021", CINEMATIC_NO_AIM, 0, 4, 0, 1 )
			StartCinematic()
			UpdateCinematic( 1 )

			TActivate("trBrodygaInMap_cam02")
			TActivate("trBrodygaInMap_End")
		</script>
	</trigger>
	<trigger Name="trBrodygaInMap_FadeIn" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			SetWeather (0)
			SetGameTime (12,0)

			RuleConsole("g_postEffect NoiseOn")

			local Plf = GetPlayerVehicle()
			Plf:SetSkin ( 24 )
			Plf:SetGamePositionOnGround(CVector(3760.207, 426.081, 230.219))
			Plf:SetRotation(Quaternion(-0.026, -0.167, -0.004, 0.986))
			Plf:SetCustomLinearVelocity( 30 )
			Plf:SetThrottle( 1 )
			Plf:SetExternalPathByName("start_path01")
		</script>
	</trigger>
	<trigger Name="trBrodygaInMap_cam02" active="0">
		<event flypath="Start_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local Plf = GetPlayerVehicle()
			Plf:SetPosition( CVector(3731.102, 390.069, 320.990))
			Plf:SetRotation(Quaternion(0.265, -0.116, 0.010, 0.957))
			Plf:SetCustomLinearVelocity( 30 )
			Plf:SetThrottle( 1 )
		</script>
	</trigger>
	<trigger	Name="trBrodygaInMap_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local Plf = GetPlayerVehicle()
			Plf:PlaceToEndOfPath("start_path01")
			Plf:SetGamePositionOnGround( CVector(3675.000, 344.131, 485.000))
			Plf:SetCustomLinearVelocity( 0 )
			Plf:SetThrottle( 0 )

			TDeactivate("trBrodygaInMap_cam02")

			CreateNewDummyObject( "dweller_new_hero", "humPlayer", -1, -1, CVector(3672.973, 344.131, 491.826), Quaternion(0.000, -0.250, 0.000, -0.968), 0)
			Fly("Start_cam03", CINEMATIC_NO_AIM, 0, 15, 0, 1 )
			StartCinematic()

			AddCinematicMessage( 101, 0.25 )

			TActivate("trBrodygaInMap2_End")
		</script>
	</trigger>

<!-- 	********* ********		-->
	<trigger	Name="trBrodygaInMap2_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local Plf = GetPlayerVehicle()
			Plf:SetExternalPathByName("start_path01")
			Plf:PlaceToEndOfPath()

			local humPlayer = getObj("humPlayer")
			if humPlayer then humPlayer:Remove() end

			TDeactivate("trBrodygaInMap2")
			TDeactivate("trBrodygaInMap2_FadeIn")

			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

			RuleConsole("g_postEffect NoiseOff")
		</script>
	</trigger>




<!--********** погоня **********-->
	<trigger	Name="trBandit"	active="1">
		<event	eventid="GE_OBJECT_ENTERS_LOCATION"	ObjName="StartGame_loc" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			RuleConsole("cinematic_spring_coeff 1.7")

			CreateTeam("BanditTeam01",1105,CVector(3762.044, 427.069, 221.447),{"r1m1_sml01"})

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local Bandit = getObj("BanditTeam01_vehicle_0")
			local BanditId = Bandit:GetId()

			Fly("Start_cam01", CINEMATIC_NO_AIM, 0, 2, 1, 0 )
			FlyLinked( "Bandit_cam02", BanditId , 3, 0, 0, BanditId )
			Fly("Bandit_cam03", CINEMATIC_NO_AIM, 0, 3, 0, 0 )
			FlyLinked( "Bandit_cam04", PlfID , 3, 0, 1, BanditId )
			StartCinematic()

			TActivate("trBandit_FadeIn")
			TActivate("trBandit_cam02")
			TActivate("trBandit_cam03")
			TActivate("trBandit_cam04")
			TActivate("trBandit_End")
		</script>
	</trigger>
	<trigger Name="trBandit_FadeIn" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOn")

			local Bandit = getObj("BanditTeam01_vehicle_0")
			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetCustomLinearVelocity( 0 )
				Plf:SetThrottle( 0 )
			end

			if Bandit then
				Bandit:setGodMode(1)
				Bandit:SetGamePositionOnGround(CVector(3762.044, 426.069, 221.447))
				Bandit:SetRotation(Quaternion(0.000, -0.133, 0.000, 0.991))
				Bandit:SetCustomLinearVelocity( 60 )
				Bandit:SetThrottle( 1 )
				Bandit:SetExternalPathByName("start_path01")
			end
		</script>
	</trigger>
	<trigger Name="trBandit_cam02" active="0">
		<event flypath="Bandit_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local Bandit = getObj("BanditTeam01_vehicle_0")
			if Bandit then
				Bandit:SetPosition( CVector(3731.102, 390.069, 320.990))
				Bandit:SetRotation(Quaternion(0.265, -0.116, 0.010, 0.957))
				Bandit:SetCustomLinearVelocity( 30 )
				Bandit:SetThrottle( 1 )
			end
		</script>
	</trigger>
	<trigger Name="trBandit_cam03" active="0">
		<event flypath="Bandit_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local Bandit = getObj("BanditTeam01_vehicle_0")
			if Bandit then
				Bandit:PlaceToEndOfPath("start_path01")
				Bandit:SetGamePositionOnGround(CVector(3655.397, 334.493, 560.197))
				Bandit:SetRotation(Quaternion(0.030, -0.131, 0.015, 0.991))
				Bandit:SetCustomLinearVelocity( 80 )
				Bandit:SetThrottle( 1 )
				Bandit:SetExternalPathByName("start_path02")
			end
		</script>
	</trigger>
	<trigger Name="trBandit_cam04" active="0">
		<event flypath="Bandit_cam04" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			SetTolerance(1100, 1105, RS_ENEMY)

			local Plf = GetPlayerVehicle()
			Plf:setGodMode(1)
		</script>
	</trigger>
	<trigger	Name="trBandit_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local Bandit = getObj("BanditTeam01_vehicle_0")
			local BanditId = Bandit:GetId()
			if Bandit then
				Bandit:setGodMode(0)
				Bandit:SetExternalPathByName("start_path02")
				Bandit:PlaceToEndOfPath("start_path02")
				SetCameraDirectionToObj(BanditId) --разворачиваем игроковскую камеру
			end

			TDeactivate("trBandit_cam02")
			TDeactivate("trBandit_cam03")
			TDeactivate("trBandit_FadeIn")
			TDeactivate("trBandit_cam04")

			RestoreAllToleranceStatus()

			RuleConsole("g_postEffect NoiseOff")
			RuleConsole("cinematic_spring_coeff 0.7")
		</script>
	</trigger>




<!-- *************** Разговор с умником *****************  -->
	<trigger	Name="cinCleverMan"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			CreateNewDummyObject( "dweller_new_hero", "humPlayer", -1, -1, CVector(3120.431, 380.770, 955.754), Quaternion(0.0000, 0.9188, 0.0000, -0.3947), 0)
			CreateNewDummyObject( "dweller_umnik", "humUmnik", -1, -1, CVector(3119.170, 380.770, 954.722), Quaternion(0.0000, 0.3297, 0.0000, 0.9441), 0)

			local humPlayer = getObj("humPlayer")
			local humPlayerId = humPlayer:GetId()
			local humPlayerCoor = humPlayer:GetPosition()

			if humPlayer then
				humPlayerCoor.y = humPlayerCoor.y + 0.1
				humPlayerCoor.z = humPlayerCoor.z + 20

				FlyAround(1, 0.3, 10, 108, humPlayerCoor, humPlayerId, 1, 1)
				StartCinematic()

				AddCinematicMessage( 401, 0.5 )
				AddCinematicMessage( 402, 0.25 )
				AddCinematicMessage( 403, 0.25 )
				AddCinematicMessage( 404, 0.25 )
				AddCinematicMessage( 405, 0.25 )
				AddCinematicMessage( 406, 0.25 )
				AddCinematicMessage( 407, 0.25 )
				AddCinematicMessage( 408, 0.25 )
				AddCinematicMessage( 409, 0.25 )
				AddCinematicMessage( 410, 0.25 )
				AddCinematicMessage( 411, 0.25 )
				AddCinematicMessage( 412, 0.25 )
				AddCinematicMessage( 413, 0.25 )

				TActivate("cinCleverMan_FadeIn")
				TActivate("cinCleverMan_End")
				TActivate("cinCleverMan_msg401")
				TActivate("cinCleverMan_msg402")
				TActivate("cinCleverMan_msg403")
				TActivate("cinCleverMan_msg404")
				TActivate("cinCleverMan_msg405")
				TActivate("cinCleverMan_msg406")
				TActivate("cinCleverMan_msg407")
				TActivate("cinCleverMan_msg408")
				TActivate("cinCleverMan_msg409")
				TActivate("cinCleverMan_msg410")
				TActivate("cinCleverMan_msg411")
				TActivate("cinCleverMan_msg412")
				TActivate("cinCleverMan_msg413")
			end
		</script>
	</trigger>
	<trigger	Name="cinCleverMan_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOn")

			local Plf = GetPlayerVehicle()
			local humPlayer = getObj("humPlayer")
			local humUmnik = getObj("humUmnik")
			if Plf then
				Plf:SetThrottle( 0 )
				Plf:SetCustomLinearVelocity( 0 )
				Plf:SetGamePositionOnGround(CVector(3122.480, 391.449, 950.265))
				Plf:SetRotation(Quaternion(0.001, -0.828, 0.002, 0.561))
			end

			if humPlayer then humPlayer:SetPosition(CVector(3120.431, 390.770, 955.754)) end
			if humUmnik then humUmnik:SetPosition(CVector(3119.170, 390.770, 954.722)) end

		</script>
	</trigger>
	<trigger Name="cinCleverMan_msg401" active="0">
		<event msgid="401" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN2)
				humPlayer:SetNextForAnimation(AT_PAIN2, AT_STAND1)
				humPlayer:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger Name="cinCleverMan_msg402" active="0">
		<event msgid="402" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humUmnik = getObj("humUmnik")
			if humUmnik then
				humUmnik:SetNodeAction(AT_RESERVED1)
				humUmnik:SetNextForAnimation(AT_RESERVED1, AT_STAND1)
				humUmnik:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger Name="cinCleverMan_msg403" active="0">
		<event msgid="403" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN2)
				humPlayer:SetNextForAnimation(AT_PAIN2, AT_STAND1)
				humPlayer:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger Name="cinCleverMan_msg404" active="0">
		<event msgid="404" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humUmnik = getObj("humUmnik")
			if humUmnik then
				humUmnik:SetNodeAction(AT_RESERVED1)
				humUmnik:SetNextForAnimation(AT_RESERVED1, AT_STAND1)
				humUmnik:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger Name="cinCleverMan_msg405" active="0">
		<event msgid="405" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN2)
				humPlayer:SetNextForAnimation(AT_PAIN2, AT_STAND1)
				humPlayer:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger Name="cinCleverMan_msg406" active="0">
		<event msgid="406" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humUmnik = getObj("humUmnik")
			if humUmnik then
				humUmnik:SetNodeAction(AT_RESERVED1)
				humUmnik:SetNextForAnimation(AT_RESERVED1, AT_STAND1)
				humUmnik:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger Name="cinCleverMan_msg407" active="0">
		<event msgid="407" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN2)
				humPlayer:SetNextForAnimation(AT_PAIN2, AT_STAND2)
				humPlayer:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger Name="cinCleverMan_msg408" active="0">
		<event msgid="408" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humUmnik = getObj("humUmnik")
			if humUmnik then
				humUmnik:SetNodeAction(AT_RESERVED1)
				humUmnik:SetNextForAnimation(AT_RESERVED1, AT_STAND2)
				humUmnik:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger Name="cinCleverMan_msg409" active="0">
		<event msgid="409" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN2)
				humPlayer:SetNextForAnimation(AT_PAIN2, AT_STAND1)
				humPlayer:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger Name="cinCleverMan_msg410" active="0">
		<event msgid="410" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humUmnik = getObj("humUmnik")
			if humUmnik then
				humUmnik:SetNodeAction(AT_RESERVED1)
				humUmnik:SetNextForAnimation(AT_RESERVED1, AT_STAND1)
				humUmnik:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger Name="cinCleverMan_msg411" active="0">
		<event msgid="411" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN2)
				humPlayer:SetNextForAnimation(AT_PAIN2, AT_STAND1)
				humPlayer:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger Name="cinCleverMan_msg412" active="0">
		<event msgid="412" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humUmnik = getObj("humUmnik")
			if humUmnik then
				humUmnik:SetNodeAction(AT_RESERVED1)
				humUmnik:SetNextForAnimation(AT_RESERVED1, AT_STAND1)
				humUmnik:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger Name="cinCleverMan_msg413" active="0">
		<event msgid="413" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()
			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN2)
				humPlayer:SetNextForAnimation(AT_PAIN2, AT_STAND1)
				humPlayer:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger	Name="cinCleverMan_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humUmnik = getObj("humUmnik")

			if humPlayer then humPlayer:Remove() end
			if humUmnik then humUmnik:Remove() end

			TDeactivate("cinCleverMan")
			TDeactivate("cinCleverMan_msg401")
			TDeactivate("cinCleverMan_msg402")
			TDeactivate("cinCleverMan_msg403")
			TDeactivate("cinCleverMan_msg404")
			TDeactivate("cinCleverMan_msg405")
			TDeactivate("cinCleverMan_msg406")
			TDeactivate("cinCleverMan_msg407")
			TDeactivate("cinCleverMan_msg408")
			TDeactivate("cinCleverMan_msg409")
			TDeactivate("cinCleverMan_msg410")
			TDeactivate("cinCleverMan_msg411")
			TDeactivate("cinCleverMan_msg412")
			TDeactivate("cinCleverMan_msg413")
			TDeactivate("cinCleverMan_FadeIn")

			RuleConsole("g_postEffect NoiseOff")

			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()
		</script>
	</trigger>




<!-- ***************** Бродяга видит библиотеку *********** -->
	<trigger	Name="cinLibraryLook"	active="0">
		<event	timeout="0"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			Fly("LibraryLook_cam01", CINEMATIC_NO_AIM, 0, 11, 1, 1, 1, 0, 1 )
			StartCinematic()

			AddCinematicMessage( 201, 2)

			TActivate("LibraryLook_FadeIn")
			TActivate("LibraryLook_End")
		</script>
	</trigger>
	<trigger	Name="LibraryLook_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOn")

			local  Plf = GetPlayerVehicle()
			Plf:SetThrottle( 0 )
			Plf:SetCustomLinearVelocity( 0 )
		</script>
	</trigger>
	<trigger	Name="LibraryLook_End"	active="0">
		<event eventid="GE_END_CINEMATIC"	ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOff")
			RestoreAllToleranceStatus()

			TDeactivate("LibraryLook_FadeIn")
			TDeactivate("LibraryLook")
		</script>
	</trigger>




<!-- ************* Герой в библиотеке рассматривает карту ************** -->
	<trigger	Name="cinPlayerLock"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()

			Fly("cinPlayerLock_cam01", CINEMATIC_NO_AIM, 0, 10, 1, 0 )
			Fly("cinPlayerLock_cam02", CINEMATIC_NO_AIM, 0, 12, 0, 0 )
			Fly("cinPlayerLock_cam03", CINEMATIC_NO_AIM, 0, 21, 0, 1 )
			StartCinematic()

			TActivate("cinPlayerLock_FadeIn")
			TActivate("trPlayerLock_cam02")
			TActivate("trPlayerLock_cam03")
			TActivate("cinPlayerLock_End")
		</script>
	</trigger>
	<trigger	Name="cinPlayerLock_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOn")
			CreateNewDummyObject( "dweller_new_hero", "humPlayer", -1, -1, CVector(2026.402, 462.580, 770.651), Quaternion(0.0000, -0.9991, 0.0000, -0.0414), 0)
			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetThrottle( 0 )
				Plf:SetCustomLinearVelocity( 0 )
			end
			local humPl = getObj("humPlayer")
			if humPl then
				humPl:SetNodeAction(AT_MOVE2)
				humPl:SetNextForAnimation(AT_MOVE2, AT_STAND1)
				humPl:SetNextForAnimation(AT_STAND2, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger	Name="trPlayerLock_cam02"	active="0">
		<event	flypath="cinPlayerLock_cam02"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPl = getObj("humPlayer")
			if humPl then
				humPl:SetNodeAction(AT_STAND2)
				humPl:SetNextForAnimation(AT_STAND2, AT_STAND1)
				humPl:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end

			AddCinematicMessage( 5011, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trPlayerLock_cam03"	active="0">
		<event	flypath="cinPlayerLock_cam03"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPl = getObj("humPlayer")
			if humPl then
				humPl:SetNodeAction(AT_MOVE2)
				humPl:SetNextForAnimation(AT_MOVE2, AT_STAND1)
				humPl:SetNextForAnimation(AT_STAND2, AT_STAND1)
			end

			AddCinematicMessage( 5012, 0.25 )
		</script>
	</trigger>
	<trigger	Name="cinPlayerLock_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			TDeactivate("cinPlayerLock_FadeIn")
			TDeactivate("trPlayerLock_cam02")
			TDeactivate("trPlayerLock_cam03")

			local humPl = getObj("humPlayer")
			if humPl then humPl:Remove() end

			SetCameraBehindPlayerVehicle()

			RuleConsole("g_postEffect NoiseOff")
		</script>
	</trigger>




<!-- *************** 6.	Сэм обвиняет Героя и приговаривает его к смерти на арене. -->
	<trigger	Name="cinPlRunFromLib"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SetTolerance(1100, 1109, RS_ALLY)

			SaveAllToleranceStatus(RS_NEUTRAL)

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.y = PlfCoor.y + 20
			PlfCoor.z = PlfCoor.z + 20

			Fly("BlackCam", CINEMATIC_NO_AIM, 0, 2, 1, 0 )
			Fly("PlRunFromLib_cam01", CINEMATIC_NO_AIM, 0, 9, 0, 0 )
			Fly("PlRunFromLib_cam02", CINEMATIC_NO_AIM, 0, 5, 0, 0 )
			Fly("PlRunFromLib_cam03", CINEMATIC_NO_AIM, 0, 49, 0, 0 )
			Fly("PlRunFromLib_cam04", CINEMATIC_NO_AIM, 0, 4, 0, 0 )
			Fly("PlRunFromLib_cam05", CINEMATIC_NO_AIM, 0, 12, 0, 0 )
			Fly("PlRunFromLib_cam06", CINEMATIC_NO_AIM, 0, 4, 0, 0 )
			Fly("PlRunFromLib_cam07", CINEMATIC_NO_AIM, 0, 19, 0, 1 )
			StartCinematic()

			TActivate("cinPlRunFromLib_FadeIn")
			TActivate("trPlRunFromLib_cam01")
			TActivate("trPlRunFromLib_cam02")
			TActivate("trPlRunFromLib_cam03")
			TActivate("trPlRunFromLib_cam04")
			TActivate("trPlRunFromLib_cam05")
			TActivate("trPlRunFromLib_cam06")
			TActivate("trPlRunFromLib_cam07")
			TActivate("trPlRunFromLib_msg604")
			TActivate("trPlRunFromLib_msg605")
			TActivate("trPlRunFromLib_msg610")
			TActivate("trPlRunFromLib_msg611")
			TActivate("cinPlRunFromLib_End")

			CreateNewDummyObject( "dweller_new_hero", "humPlayer", -1, -1, CVector(1998.756, 541.420, 1929.628), Quaternion(0.000, 0.651, 0.000, 0.759), 0)
			CreateNewDummyObject( "dweller_sam", "humSem", -1, -1, CVector(2001.898, 542.527, 1930.171), Quaternion(0.000, -0.760, 0.000, 0.649), 0)

		</script>
	</trigger>
	<trigger	Name="cinPlRunFromLib_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOn")

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetThrottle( 0 )
				Plf:SetCustomLinearVelocity( 0 )
				Plf:SetRotation(Quaternion(0,0,0,1))
				Plf:SetPosition(CVector(getPos("TankSpawn_loc")))
			end
		</script>
	</trigger>
	<trigger	Name="trPlRunFromLib_cam01"	active="0">
		<event	flypath="PlRunFromLib_cam01"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()
			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_PAIN1)
				humSem:SetNextForAnimation(AT_PAIN1, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_MOVE2)
				humPlayer:SetNextForAnimation(AT_MOVE2, AT_STAND1)
			end

			AddCinematicMessage( 601, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trPlRunFromLib_cam02"	active="0">
		<event	flypath="PlRunFromLib_cam02"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()
			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN2)
				humPlayer:SetNextForAnimation(AT_PAIN2, AT_PAIN2)
			end

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			AddCinematicMessage( 602, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trPlRunFromLib_cam03"	active="0">
		<event	flypath="PlRunFromLib_cam03"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()
			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			AddCinematicMessage( 603, 0.25 )
			AddCinematicMessage( 604, 0.25 )
			AddCinematicMessage( 605, 0.25 )
			AddCinematicMessage( 60512, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trPlRunFromLib_msg604"	active="0">
		<event	msgid="604"		eventid="GE_START_CINEMATIC_MSG"	ObjName="Player1" />
		<script>
			trigger:Deactivate()
			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_PAIN1)
			end
		</script>
	</trigger>
	<trigger	Name="trPlRunFromLib_msg605"	active="0">
		<event	msgid="605"		eventid="GE_START_CINEMATIC_MSG"	ObjName="Player1" />
		<script>
			trigger:Deactivate()
			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end
		</script>
	</trigger>
	<trigger	Name="trPlRunFromLib_cam04"	active="0">
		<event	flypath="PlRunFromLib_cam04"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()
			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_PAIN2)
			end

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			AddCinematicMessage( 606, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trPlRunFromLib_cam05"	active="0">
		<event	flypath="PlRunFromLib_cam05"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()
			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			AddCinematicMessage( 607, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trPlRunFromLib_cam06"	active="0">
		<event	flypath="PlRunFromLib_cam06"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()
			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNodeAction(AT_PAIN1, AT_STAND1)
			end

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			AddCinematicMessage( 608, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trPlRunFromLib_cam07"	active="0">
		<event	flypath="PlRunFromLib_cam07"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			AddCinematicMessage( 609, 0.25 )
			AddCinematicMessage( 610, 0.25 )
			AddCinematicMessage( 611, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trPlRunFromLib_msg610"	active="0">
		<event	msgid="610"		eventid="GE_START_CINEMATIC_MSG"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
				humPlayer:SetNodeAction(AT_STAND1, AT_PAIN2)
				humPlayer:SetNodeAction(AT_PAIN2, AT_PAIN2)
			end
		</script>
	</trigger>
	<trigger	Name="trPlRunFromLib_msg611"	active="0">
		<event	msgid="611"		eventid="GE_START_CINEMATIC_MSG"	ObjName="Player1" />
		<script>
			trigger:Deactivate()
			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end
		</script>
	</trigger>
	<trigger	Name="cinPlRunFromLib_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RestoreAllToleranceStatus()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humPlayer then humPlayer:Remove() end
			if humSem then humSem:Remove() end

			TDeactivate("trPlRunFromLib_cam01")
			TDeactivate("trPlRunFromLib_cam02")
			TDeactivate("trPlRunFromLib_cam03")
			TDeactivate("trPlRunFromLib_cam04")
			TDeactivate("trPlRunFromLib_cam05")
			TDeactivate("trPlRunFromLib_cam06")
			TDeactivate("trPlRunFromLib_cam07")
			TDeactivate("trPlRunFromLib_msg604")
			TDeactivate("trPlRunFromLib_msg605")
			TDeactivate("trPlRunFromLib_msg610")
			TDeactivate("trPlRunFromLib_msg611")
			TDeactivate("cinPlRunFromLib_FadeIn")

			RuleConsole("g_postEffect NoiseOff")

			SetCameraBehindPlayerVehicle()

			TActivate("trMegaFight")

			AllowInfectionZoneGeneration( 0 )
		</script>
	</trigger>



<!-- 7.	Сэм, предлагает герою войти в его команду, Герой соглашается на его предложение. -->
	<trigger	Name="cinAfterFight"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()

			PlfCoor.y = PlfCoor.y + 20
			PlfCoor.z = PlfCoor.z + 20

			FlyAround(1, 0.3, 25, 3, PlfCoor, PlfID, 1, 0)
			Fly("AfterFight_cam01", CINEMATIC_NO_AIM, 0, 13, 1, 0 )
			Fly("AfterFight_cam02", CINEMATIC_NO_AIM, 0, 3, 0, 0 )
			Fly("AfterFight_cam03", CINEMATIC_NO_AIM, 0, 19, 0, 0 )
			Fly("AfterFight_cam04", CINEMATIC_NO_AIM, 0, 8, 0, 0 )
			Fly("AfterFight_cam05", CINEMATIC_NO_AIM, 0, 38, 0, 0 )
			Fly("AfterFight_cam06", CINEMATIC_NO_AIM, 0, 19, 0, 1 )
			StartCinematic()

			TActivate("cinAfterFight_FadeIn")
			TActivate("trAfterFight_cam01")
			TActivate("trAfterFight_cam02")
			TActivate("trAfterFight_cam03")
			TActivate("trAfterFight_cam04")
			TActivate("trAfterFight_cam05")
			TActivate("trAfterFight_cam06")
			TActivate("trAfterFigh_msg707")
			TActivate("cinAfterFight_End")
		</script>
	</trigger>
	<trigger	Name="cinAfterFight_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOn")

			CreateNewDummyObject( "dweller_new_hero", "humPlayer", -1, -1, CVector(1998.756, 541.420, 1929.628), Quaternion(0.000, 0.651, 0.000, 0.759), 0)
			CreateNewDummyObject( "dweller_sam", "humSem", -1, -1, CVector(2001.898, 542.527, 1930.171), Quaternion(0.000, -0.760, 0.000, 0.649), 0)

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetThrottle( 0 )
				Plf:SetCustomLinearVelocity( 0 )
			end
		</script>
	</trigger>
	<trigger	Name="trAfterFight_cam01"	active="0">
		<event	flypath="AfterFight_cam01"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_MOVE2)
				humPlayer:SetNextForAnimation(AT_MOVE2, AT_STAND1)
			end

			AddCinematicMessage( 701, 0.5 )
		</script>
	</trigger>
	<trigger	Name="trAfterFight_cam02"	active="0">
		<event	flypath="AfterFight_cam02"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN2)
				humPlayer:SetNextForAnimation(AT_PAIN2, AT_PAIN2)
			end

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			AddCinematicMessage( 702, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trAfterFight_cam03"	active="0">
		<event	flypath="AfterFight_cam03"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			AddCinematicMessage( 703, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trAfterFight_cam04"	active="0">
		<event	flypath="AfterFight_cam04"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_PAIN1)
			end

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			AddCinematicMessage( 704, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trAfterFight_cam05"	active="0">
		<event	flypath="AfterFight_cam05"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_PAIN1)
				humSem:SetNextForAnimation(AT_PAIN1, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			AddCinematicMessage( 705, 0.25 )
			AddCinematicMessage( 70512, 0.25 )
		</script>
	</trigger>

	<trigger	Name="trAfterFight_cam06"	active="0">
		<event	flypath="AfterFight_cam06"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN2)
				humPlayer:SetNodeAction(AT_PAIN2, AT_STAND2)
			end

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			AddCinematicMessage( 706, 0.25 )
			AddCinematicMessage( 707, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trAfterFigh_msg707"	active="0">
		<event	msgid="707"		eventid="GE_START_CINEMATIC_MSG"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end
		</script>
	</trigger>
	<trigger	Name="cinAfterFight_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOff")

			RestoreAllToleranceStatus()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humPlayer then humPlayer:Remove() end
			if humSem then humSem:Remove() end

			TDeactivate("trAfterFight_cam01")
			TDeactivate("trAfterFight_cam02")
			TDeactivate("trAfterFight_cam03")
			TDeactivate("trAfterFight_cam04")
			TDeactivate("trAfterFight_cam05")
			TDeactivate("trAfterFight_cam06")
			TDeactivate("trAfterFigh_msg707")
			TDeactivate("cinAfterFight_FadeIn")

			SetCameraBehindPlayerVehicle()

			CompleteQuest("r5m1_BattleInArena_Quest")

			TActivate ("trAfterOponentDie")

			AllowInfectionZoneGeneration( 1 )
		</script>
	</trigger>




<!-- 9.	Герой отчитывается Сэму. Сэм дает ему новое задание. -->
	<trigger	Name="cinAfterGonchik"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.y = PlfCoor.y + 2
			PlfCoor.z = PlfCoor.z - 20

			FlyAround(1, 0.3, 15, 55, PlfCoor, PlfID, 1, 1)
			StartCinematic()

			AddCinematicMessage( 901, 0.5 )
			AddCinematicMessage( 902, 0.25 )
			AddCinematicMessage( 903, 0.25 )
			AddCinematicMessage( 904, 0.25 )
			AddCinematicMessage( 905, 0.25 )
			AddCinematicMessage( 90512, 0.25 )

			TActivate("cinAfterGonchik_FadeIn")
			TActivate("trAfterGonchik_msg902")
			TActivate("trAfterGonchik_msg903")
			TActivate("trAfterGonchik_msg904")
			TActivate("trAfterGonchik_msg905")
			TActivate("cinAfterGonchik_End")
		</script>
	</trigger>
	<trigger	Name="cinAfterGonchik_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOn")
			CreateNewDummyObject( "dweller_new_hero", "humPlayer", -1, -1, CVector(3614.667, 453.300, 2345.863), Quaternion(0.006, -0.980, 0.002, -0.200), 0)
			local Plf = GetPlayerVehicle()
			local humPlayer = getObj("humPlayer")

			if Plf then
				Plf:SetThrottle( 0 )
				Plf:SetCustomLinearVelocity( 0 )
				Plf:SetGamePositionOnGround(CVector(3610.667, 453.913, 2345.863))
				Plf:SetRotation(Quaternion(0.006, -0.980, 0.002, -0.200))
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH1)
				humPlayer:SetNextForAnimation(AT_DEATH1, AT_DEATH1)
			end
		</script>
	</trigger>
	<trigger Name="trAfterGonchik_msg902" active="0">
		<event msgid="902" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH2)
				humPlayer:SetNextForAnimation(AT_DEATH2, AT_DEATH2)
			end
		</script>
	</trigger>
	<trigger Name="trAfterGonchik_msg903" active="0">
		<event msgid="903" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH1)
				humPlayer:SetNextForAnimation(AT_DEATH1, AT_DEATH1)
			end
		</script>
	</trigger>
	<trigger Name="trAfterGonchik_msg904" active="0">
		<event msgid="904" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH2)
				humPlayer:SetNextForAnimation(AT_DEATH2, AT_DEATH2)
			end
		</script>
	</trigger>
	<trigger Name="trAfterGonchik_msg905" active="0">
		<event msgid="905" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH1)
				humPlayer:SetNextForAnimation(AT_DEATH2, AT_DEATH1)
			end
		</script>
	</trigger>
	<trigger	Name="cinAfterGonchik_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then humPlayer:Remove() end

			TDeactivate("cinAfterGonchik_FadeIn")
			TDeactivate("trAfterGonchik_msg902")
			TDeactivate("trAfterGonchik_msg903")
			TDeactivate("trAfterGonchik_msg904")
			TDeactivate("trAfterGonchik_msg905")
			RuleConsole("g_postEffect NoiseOff")

			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

			TActivate("trCreateKonkurent")
		</script>
	</trigger>




<!-- 10.	Небольшой диалог перед сражение с потенциальным лидером -->
	<trigger	Name="cinNearFormulaVeh"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local F =  GetEntityByName("FormulaEx")
			local FEId = F:GetId()

			if Plf and FEId then
				FlyLinked( "NearFormulaVeh_cam01", PlfID , 21, 1, 1, FEId)
				StartCinematic()

				AddCinematicMessage( 1001, 0.5 )
				AddCinematicMessage( 1002, 0.25 )
				AddCinematicMessage( 1003, 0.25 )
				AddCinematicMessage( 1004, 0.25 )
			end

			TActivate("cinNearFormulaVeh_FadeIn")
			TActivate("cinNearFormulaVeh_End")
		</script>
	</trigger>
	<trigger	Name="cinNearFormulaVeh_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOn")

			local F =  getObj("FormulaEx")
			if F then
				F:SetRotation(Quaternion(-0.038, 0.548, -0.044, -0.835))
				F:SetGamePositionOnGround(CVector(708.888, 468.159, 916.458))
			end

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetThrottle( 0 )
				Plf:SetCustomLinearVelocity( 0 )
				Plf:SetGamePositionOnGround(CVector(662.501, 456.825, 944.039))
				Plf:SetRotation(Quaternion(0.003, -0.867, -0.052, -0.496))
			end
		</script>
	</trigger>
	<trigger	Name="cinNearFormulaVeh_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			TDeactivate("cinNearFormulaVeh")
			TDeactivate("cinNearFormulaVeh_FadeIn")

			SetCameraBehindPlayerVehicle()

			RuleConsole("g_postEffect NoiseOff")

			RestoreAllToleranceStatus()

			TActivate("trKonkurentDie")
		</script>
	</trigger>





<!-- 11.	Герой отчитывается Сэму. Сэм предлагает ему поучаствовать в гонках. -->
	<trigger	Name="cinBeforeGonka"	active="0">
		<event	timeout="0.1"	eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.y = PlfCoor.y + 2
			PlfCoor.z = PlfCoor.z - 20

			FlyAround(1, 0.3, 15, 76, PlfCoor, PlfID, 1, 0)
			Fly("BeforeGonka_cam01", CINEMATIC_NO_AIM, 0, 7, 0,1)
			StartCinematic()

			AddCinematicMessage( 1101, 0.5 )
			AddCinematicMessage( 1102, 0.25 )
			AddCinematicMessage( 1103, 0.25 )
			AddCinematicMessage( 1104, 0.25 )
			AddCinematicMessage( 1105, 0.25 )
			AddCinematicMessage( 1106, 0.25 )
			AddCinematicMessage( 1107, 0.25 )
			AddCinematicMessage( 1108, 0.25 )
			AddCinematicMessage( 1109, 0.25 )
			AddCinematicMessage( 1110, 0.25 )

			TActivate("cinBeforeGonka_FadeIn")
			TActivate("trBeforeGonka_msg1102")
			TActivate("trBeforeGonka_msg1103")
			TActivate("trBeforeGonka_msg1104")
			TActivate("trBeforeGonka_msg1105")
			TActivate("trBeforeGonka_msg1106")
			TActivate("trBeforeGonka_msg1107")
			TActivate("trBeforeGonka_msg1108")
			TActivate("trBeforeGonka_msg1109")
			TActivate("trBeforeGonka_msg1110")
			TActivate("cinBeforeGonka_End")
		</script>
	</trigger>
	<trigger	Name="cinBeforeGonka_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			SetWeather (0)
			SetGameTime (12,00)

			RuleConsole("g_postEffect NoiseOn")
			CreateNewDummyObject( "dweller_new_hero", "humPlayer", -1, -1, CVector(574.574, 453.700, 984.329), Quaternion(0.006, -0.980, 0.002, -0.200), 0)
			local Plf = GetPlayerVehicle()
			local humPlayer = getObj("humPlayer")

			if Plf then
				Plf:SetThrottle( 0 )
				Plf:SetCustomLinearVelocity( 0 )
				Plf:SetGamePositionOnGround(CVector(572.574, 454.548, 984.329))
				Plf:SetRotation(Quaternion(-0.049, 0.208, -0.029, 0.977))
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH1)
				humPlayer:SetNextForAnimation(AT_DEATH2, AT_DEATH2)
			end
		</script>
	</trigger>
	<trigger Name="trBeforeGonka_msg1102" active="0">
		<event msgid="1102" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH1)
				humPlayer:SetNextForAnimation(AT_DEATH1, AT_DEATH1)
			end
		</script>
	</trigger>
	<trigger Name="trBeforeGonka_msg1103" active="0">
		<event msgid="1103" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH2)
				humPlayer:SetNextForAnimation(AT_DEATH2, AT_DEATH2)
			end
		</script>
	</trigger>
	<trigger Name="trBeforeGonka_msg1104" active="0">
		<event msgid="1104" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH1)
				humPlayer:SetNextForAnimation(AT_DEATH1, AT_DEATH1)
			end
		</script>
	</trigger>
	<trigger Name="trBeforeGonka_msg1105" active="0">
		<event msgid="1105" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH2)
				humPlayer:SetNextForAnimation(AT_DEATH2, AT_DEATH2)
			end
		</script>
	</trigger>
	<trigger Name="trBeforeGonka_msg1106" active="0">
		<event msgid="1106" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH1)
				humPlayer:SetNextForAnimation(AT_DEATH1, AT_DEATH1)
			end
		</script>
	</trigger>
	<trigger Name="trBeforeGonka_msg1107" active="0">
		<event msgid="1107" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH2)
				humPlayer:SetNextForAnimation(AT_DEATH2, AT_DEATH2)
			end
		</script>
	</trigger>
	<trigger Name="trBeforeGonka_msg1108" active="0">
		<event msgid="1108" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH1)
				humPlayer:SetNextForAnimation(AT_DEATH1, AT_DEATH1)
			end
		</script>
	</trigger>
	<trigger Name="trBeforeGonka_msg1109" active="0">
		<event msgid="1109" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH2)
				humPlayer:SetNextForAnimation(AT_DEATH2, AT_DEATH2)
			end
		</script>
	</trigger>
	<trigger Name="trBeforeGonka_msg1110" active="0">
		<event msgid="1110" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_DEATH1)
				humPlayer:SetNextForAnimation(AT_DEATH1, AT_DEATH1)
			end
		</script>
	</trigger>
	<trigger	Name="cinBeforeGonka_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then humPlayer:Remove() end

			TDeactivate("cinBeforeGonka_FadeIn")
			TDeactivate("trBeforeGonka_msg1102")
			TDeactivate("trBeforeGonka_msg1103")
			TDeactivate("trBeforeGonka_msg1104")
			TDeactivate("trBeforeGonka_msg1105")
			TDeactivate("trBeforeGonka_msg1106")
			TDeactivate("trBeforeGonka_msg1107")
			TDeactivate("trBeforeGonka_msg1108")
			TDeactivate("trBeforeGonka_msg1109")
			TDeactivate("trBeforeGonka_msg1110")

			TActivate("trStartGonka")

			RuleConsole("g_postEffect NoiseOff")

			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

			AllowInfectionZoneGeneration( 0 )
		</script>
	</trigger>




<!-- 12.	Сэм принимает Героя в команду в качестве полноценного партнера, и предлагает поймать нарушителей границы. -->
	<trigger	Name="cinAfterGonka"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			Fly("AfterGonka_cam01", CINEMATIC_NO_AIM, 0, 47, 1,1)
			StartCinematic()

			AddCinematicMessage( 1201, 0.25 )
			AddCinematicMessage( 1202, 0.25 )
			AddCinematicMessage( 120212, 0.25 )
			AddCinematicMessage( 1203, 0.25 )
			AddCinematicMessage( 1204, 0.25 )
			AddCinematicMessage( 1205, 0.25 )
			AddCinematicMessage( 1206, 0.25 )
			AddCinematicMessage( 1207, 0.25 )

			TActivate("cinAfterGonka_FadeIn")
			TActivate("cinAfterGonka_End")
		</script>
	</trigger>
	<trigger	Name="cinAfterGonka_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOn")

			if GetPlayerVehicle() then
				GetPlayerVehicle():SetThrottle( 0 )
				GetPlayerVehicle():SetCustomLinearVelocity( 0 )
			end

			local ekran = getObj("ekran_anim")
			if ekran then ekran:SetSkin(3) end

			CreateNewDummyObject( "dweller_new_hero_kubok", "humPlayer", -1, -1, CVector(1358.000, 523.000, 1685.000), Quaternion(0.059, 0.770, -0.072, 0.631), 0)
		</script>
	</trigger>
	<trigger	Name="cinAfterGonka_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			TDeactivate("cinAfterGonka")
			TDeactivate("cinAfterGonka_FadeIn")

			local humPlayer = getObj("humPlayer")
			local ekran = getObj("ekran_anim")
			if humPlayer then humPlayer:Remove() end
			if ekran then ekran:SetSkin(0) end

			SetCameraBehindPlayerVehicle()

			RestoreAllToleranceStatus()

			TActivate("trCreateVor")
			TActivate("trAfterGonkaEnd")

			RuleConsole("g_postEffect NoiseOff")

			AllowInfectionZoneGeneration( 1 )
		</script>
	</trigger>



<!-- Герой видит вора. -->
	<trigger	Name="cinNearVor"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()

			local C = GetEntityByName("NearVor_loc")
			local CID = C:GetId()

			local CCoor = C:GetPosition()
			CCoor.y = CCoor.y + 20
			CCoor.z = CCoor.z + 20

			if Plf and CID then
				FlyLinked( "NearVor_cam01", PlfID, 24, 1, 1, CID)
				StartCinematic()

				AddCinematicMessage( 1301, 0.25 )
				AddCinematicMessage( 1302, 0.25 )
				AddCinematicMessage( 1303, 0.25 )
				AddCinematicMessage( 1304, 0.25 )
			end

			TActivate("cinNearVor_FadeIn")
			TActivate("cinNearVor_End")
		</script>
	</trigger>
	<trigger	Name="cinNearVor_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			CreateTeam ("VorTeam", 1152, CVector(getPos("SpawnVor_loc")), {"Scout01"}, nil, nil, nil)
			SetGodTeam("VorTeam")

			CreateTeam ("PresledovateliTeam", 1112, {CVector(getPos("SpawnPresledovatel1_loc")), CVector(getPos("SpawnPresledovatel2_loc"))}, {"Fighter03", "r1m1_sml01"}, nil, nil, nil)
			SetGodTeam("PresledovateliTeam")

			TActivate("trCreateStopVor")

			SetTolerance(1152, 1112, RS_ENEMY)

			RuleConsole("g_postEffect NoiseOn")

			GetPlayerVehicle():SetThrottle( 0 )
			GetPlayerVehicle():SetCustomLinearVelocity( 0 )
		</script>
	</trigger>
	<trigger	Name="cinNearVor_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RestoreAllToleranceStatus()

			RuleConsole("g_postEffect NoiseOff")

			SetGodTeam("PresledovateliTeam", 0)
			TActivate("trPresledDie")

			TDeactivate("cinNearVor")
			TDeactivate("cinNearVor_FadeIn")

			SetCameraBehindPlayerVehicle()
		</script>
	</trigger>




<!-- Герой убивает преследователей вора. -->
	<trigger	Name="cinAfterPreslDie"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()

			local C = GetEntityByName("VorTeam_vehicle_0")
			local CID = C:GetId()

			local CCoor = C:GetPosition()
			CCoor.y = CCoor.y + 25
			CCoor.z = CCoor.z + 25

			if Plf and CID then
				FlyLinked( "NearVor_cam01", PlfID, 51, 1, 1, CID)
				StartCinematic()

				AddCinematicMessage( 1401, 0.25 )
				AddCinematicMessage( 1402, 0.25 )
				AddCinematicMessage( 1403, 0.25 )
				AddCinematicMessage( 1404, 0.25 )
				AddCinematicMessage( 1405, 0.25 )
				AddCinematicMessage( 1406, 0.25 )
			end

			TActivate("cinAfterPreslDie_FadeIn")
			TActivate("cinAfterPreslDie_End")
		</script>
	</trigger>
	<trigger	Name="cinAfterPreslDie_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOn")

			GetPlayerVehicle():SetThrottle( 0 )
			GetPlayerVehicle():SetCustomLinearVelocity( 0 )
		</script>
	</trigger>
	<trigger	Name="cinAfterPreslDie_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RestoreAllToleranceStatus()

			RuleConsole("g_postEffect NoiseOff")

			TDeactivate("cinAfterPreslDie")
			TDeactivate("cinAfterPreslDie_FadeIn")

			TDeactivate("trCreateStopVor")

			SetCameraBehindPlayerVehicle()
		</script>
	</trigger>




<!-- Герой убивает вора, видит его багаж. -->
	<trigger	Name="cinVorDie"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			RuleConsole("g_postEffect NoiseOn")

			CreateNewDummyObject( "quest_video", "Trofei", -1, -1, CVector(581,527.05,2464), Quaternion(0, 0, 0, 1), 0)

			local Plf = GetEntityByName("Trofei")
			local PlfID = Plf:GetId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.y = PlfCoor.y + 1
			PlfCoor.z = PlfCoor.z + 2

			FlyAround( 1, 0, 0.5, 12, PlfCoor, PlfID, 1, 1 )
			StartCinematic()

			AddCinematicMessage( 1601, 0.5 )

			TActivate("cinVorDie_FadeIn")
			TActivate("cinVorDie_End")
		</script>
	</trigger>
	<trigger	Name="cinVorDie_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			GetPlayerVehicle():SetThrottle( 0 )
			GetPlayerVehicle():SetCustomLinearVelocity( 0 )
		</script>
	</trigger>
	<trigger	Name="cinVorDie_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RestoreAllToleranceStatus()

			GetEntityByName("Trofei"):Remove()

			RuleConsole("g_postEffect NoiseOff")

			SetCameraBehindPlayerVehicle()
		</script>
	</trigger>




<!-- ******************* просмотр кинопленки ************ -->
	<trigger	Name="cinAfterVorAtSam"	active="0">
		<event	timeout="0"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			Fly("AfterVorAtSam_cam01", CINEMATIC_NO_AIM, 0, 6, 1, 0 )
			Fly("AfterVorAtSam_cam02", CINEMATIC_NO_AIM, 0, 7, 0, 0 )
			Fly("AfterVorAtSam_cam03", CINEMATIC_NO_AIM, 0, 7, 0, 0 )
			Fly("AfterVorAtSam_cam04", CINEMATIC_NO_AIM, 0, 4, 0, 0 )
			Fly("AfterVorAtSam_cam05", CINEMATIC_NO_AIM, 0, 14, 0, 0 )
			Fly("AfterVorAtSam_cam06", CINEMATIC_NO_AIM, 0, 13, 0, 0 )
			Fly("BlackCam", CINEMATIC_NO_AIM, 0, 0.5, 1, 0 )
			Fly("AfterVorAtSam_cam07", CINEMATIC_NO_AIM, 0, 43, 1, 0 )
			Fly("AfterVorAtSam_cam08", CINEMATIC_NO_AIM, 0, 5, 0, 0 )
			Fly("AfterVorAtSam_cam09", CINEMATIC_NO_AIM, 0, 10, 0, 0 )
			Fly("AfterVorAtSam_cam10", CINEMATIC_NO_AIM, 0, 7, 0, 0 )
			Fly("AfterVorAtSam_cam11", CINEMATIC_NO_AIM, 0, 9, 0, 0 )
			Fly("AfterVorAtSam_cam12", CINEMATIC_NO_AIM, 0, 3, 0, 1 )
			StartCinematic()

			TActivate("trAfterVorAtSam_cam02")
			TActivate("trAfterVorAtSam_cam03")
			TActivate("trAfterVorAtSam_cam04")
			TActivate("trAfterVorAtSam_cam05")
			TActivate("trAfterVorAtSam_cam06")
			TActivate("trAfterVorAtSam_cam07")
			TActivate("trAfterVorAtSam_cam08")
			TActivate("trAfterVorAtSam_cam09")
			TActivate("trAfterVorAtSam_cam10")
			TActivate("trAfterVorAtSam_cam11")
			TActivate("trAfterVorAtSam_cam12")
			TActivate("trBlackCam")
			TActivate("trAfterVorAtSam_FadeIn")
			TActivate("cinAfterVorAtSam_End")
			TActivate("trAfterVorAtSam_msg1708")
		</script>
	</trigger>
	<trigger	Name="trAfterVorAtSam_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOn")
			CreateNewDummyObject( "dweller_new_hero", "humPlayer", -1, -1, CVector(1998.756, 541.420, 1929.628), Quaternion(0.000, 0.651, 0.000, 0.759), 0)
			CreateNewDummyObject( "dweller_sam", "humSem", -1, -1, CVector(2001.898, 542.527, 1930.171), Quaternion(0.000, -0.760, 0.000, 0.649), 0)
			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN2)
				humPlayer:SetNextForAnimation(AT_PAIN2, AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_STAND1)
			end

			AddCinematicMessage( 1701, 0.5 )
		</script>
	</trigger>

	<trigger	Name="trAfterVorAtSam_cam02"	active="0">
		<event	flypath="AfterVorAtSam_cam02"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			AddCinematicMessage( 1702, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trAfterVorAtSam_cam03"	active="0">
		<event	flypath="AfterVorAtSam_cam03"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()
			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_PAIN1)
			end

			AddCinematicMessage( 1703, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trAfterVorAtSam_cam04"	active="0">
		<event	flypath="AfterVorAtSam_cam04"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			AddCinematicMessage( 1704, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trAfterVorAtSam_cam05"	active="0">
		<event	flypath="AfterVorAtSam_cam05"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_PAIN2)
			end

			AddCinematicMessage( 1705, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trAfterVorAtSam_cam06"	active="0">
		<event	flypath="AfterVorAtSam_cam06"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")
			if humSem then
				humSem:SetPosition(CVector(2003.487, 541.167, 1926.399))
				humSem:SetRotation(Quaternion(0,0,0,1))
				humSem:SetNodeAction(AT_ATTACK1)
				humSem:SetNextForAnimation(AT_ATTACK1, AT_ATTACK1)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			AddCinematicMessage( 1706, 0.25 )
			AddCinematicMessage( 1707, 0.25 )
			AddCinematicMessage( 1708, 0.25 )
		</script>
	</trigger>

	<trigger	Name="trAfterVorAtSam_msg1708"	active="0">
		<event	msgid="1708"		eventid="GE_START_CINEMATIC_MSG"	ObjName="Player1" />
		<script>
			trigger:Deactivate()
--    запускаем проектор
			local humSem = getObj("humSem")
			local proektor = getObj("proektor_anim")
			if humSem then
				humSem:SetNodeAction(AT_ATTACK1)
				humSem:SetNextForAnimation(AT_ATTACK1, AT_STAND1)
			end

			if proektor then
				proektor:SetNodeAction(AT_MOVE1)
			end
		</script>
	</trigger>
	<trigger	Name="trBlackCam"	active="0">
		<event	flypath="BlackCam"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humPlayer then
				humPlayer:SetPosition(CVector(2002.031, 541.167, 1928.346))
				humPlayer:SetRotation(Quaternion(0.000, -0.833, 0.000, 0.554))
			end

			if humSem then
				humSem:SetPosition(CVector(2001.898, 542.527, 1930.171))
				humSem:SetRotation(Quaternion(0.000, -0.760, 0.000, 0.649))
			end
		</script>
	</trigger>

	<trigger	Name="trAfterVorAtSam_cam07"	active="0">
		<event	flypath="AfterVorAtSam_cam07"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()
-- меняем скин экрана
			local ekran = getObj("ekran_anim")
			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_PAIN1)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			if ekran then
				ekran:SetSkin(1)
			end

			AddCinematicMessage( 1801, 0.5 )
			AddCinematicMessage( 180112, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trAfterVorAtSam_cam08"	active="0">
		<event	flypath="AfterVorAtSam_cam08"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_PAIN2)
			end

			AddCinematicMessage( 1802, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trAfterVorAtSam_cam09"	active="0">
		<event	flypath="AfterVorAtSam_cam09"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			AddCinematicMessage( 1803, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trAfterVorAtSam_cam10"	active="0">
		<event	flypath="AfterVorAtSam_cam10"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_PAIN2)
			end

			AddCinematicMessage( 1804, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trAfterVorAtSam_cam11"	active="0">
		<event	flypath="AfterVorAtSam_cam11"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			AddCinematicMessage( 1805, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trAfterVorAtSam_cam12"	active="0">
		<event	flypath="AfterVorAtSam_cam12"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_STAND1)
			end

			AddCinematicMessage( 1806, 0.25 )
		</script>
	</trigger>

	<trigger	Name="cinAfterVorAtSam_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")
			local proektor = getObj("proektor_anim")
			local ekran = getObj("ekran_anim")

			if humPlayer then humPlayer:Remove() end
			if humSem then humSem:Remove() end
			if proektor then proektor:SetNodeAction(AT_STAND1) end
			if ekran then ekran:SetSkin(0) end

			TDeactivate("trAfterVorAtSam_cam01")
			TDeactivate("trAfterVorAtSam_cam02")
			TDeactivate("trAfterVorAtSam_cam03")
			TDeactivate("trAfterVorAtSam_cam04")
			TDeactivate("trAfterVorAtSam_cam05")
			TDeactivate("trAfterVorAtSam_cam06")
			TDeactivate("trAfterVorAtSam_cam07")
			TDeactivate("trAfterVorAtSam_cam08")
			TDeactivate("trAfterVorAtSam_cam09")
			TDeactivate("trAfterVorAtSam_cam10")
			TDeactivate("trAfterVorAtSam_cam11")
			TDeactivate("trAfterVorAtSam_cam12")
			TDeactivate("trBlackCam")
			TDeactivate("trAfterVorAtSam_msg1708")
			TDeactivate("trAfterFight_FadeIn")

			RuleConsole("g_postEffect NoiseOff")
			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()
		</script>
	</trigger>




<!-- ******************* Вернулись к Сэму с кино ************ -->
	<trigger	Name="cinReturnMovies"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			local tank = CreateVehicleEx ( "Tank01", "vehTank", CVector(2122.569, 343.039, 1979.697), 1100)
			local TankID = tank:GetId()
			if tank then
				tank:SetSkin ( 0 )
				tank:SetPosition(CVector(2122.569, 343.039, 1979.697))
				tank:SetRotation(Quaternion(0.004, 0.938, -0.011, 0.346))
			end

			Fly("AfterFight_cam01", CINEMATIC_NO_AIM, 0, 6, 1, 0 )
			Fly("AfterFight_cam02", CINEMATIC_NO_AIM, 0, 5, 0, 0 )
			Fly("AfterFight_cam03", CINEMATIC_NO_AIM, 0, 4, 0, 0 )
			Fly("AfterFight_cam04", CINEMATIC_NO_AIM, 0, 7, 0, 0 )
			Fly("AfterFight_cam05", CINEMATIC_NO_AIM, 0, 6, 0, 0 )
			Fly("AfterFight_cam06", CINEMATIC_NO_AIM, 0, 16, 0, 0 )
			Fly("AfterVorAtSam_cam03", CINEMATIC_NO_AIM, 0, 6, 0, 0 )
			Fly("AfterVorAtSam_cam02", CINEMATIC_NO_AIM, 0, 9, 0, 0 )
			Fly("ReturnMovies_cam01", CINEMATIC_NO_AIM, 0, 2, 1, 0 )
			Fly("ReturnMovies_cam02", CINEMATIC_NO_AIM, 0, 15, 0, 0 )
			FlyLinked( "ReturnMovies_cam03", TankID , 3, 0, 1, TankID)
			StartCinematic()

			TActivate("cinReturnMovies_FadeIn")
			TActivate("trReturnMovies_cam01")
			TActivate("trReturnMovies_cam02")
			TActivate("trReturnMovies_cam03")
			TActivate("trReturnMovies_cam04")
			TActivate("trReturnMovies_cam05")
			TActivate("trReturnMovies_cam06")
			TActivate("trReturnMovies_cam07")
			TActivate("trReturnMovies_cam08")
			TActivate("trReturnMovies_msg3207")
			TActivate("trReturnMovies_cam09")
			TActivate("trReturnMovies_cam10")
			TActivate("trReturnMovies_cam11")
			TActivate("trReturnMovies_msg3302")
			TActivate("trReturnMovies_msg3303")
			TActivate("cinReturnMovies_End")
		</script>
	</trigger>
	<trigger	Name="cinReturnMovies_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			SetWeather (0)

			RuleConsole("g_postEffect NoiseOn")

			CreateNewDummyObject( "dweller_new_hero", "humPlayer", -1, -1, CVector(1998.756, 541.420, 1929.628), Quaternion(0.000, 0.651, 0.000, 0.759), 0)
			CreateNewDummyObject( "dweller_sam", "humSem", -1, -1, CVector(2001.898, 542.527, 1930.171), Quaternion(0.000, -0.760, 0.000, 0.649), 0)

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetThrottle( 0 )
				Plf:SetCustomLinearVelocity( 0 )
			end
		</script>
	</trigger>
	<trigger	Name="trReturnMovies_cam01"	active="0">
		<event	flypath="AfterFight_cam01"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_MOVE2)
				humPlayer:SetNextForAnimation(AT_MOVE2, AT_STAND1)
			end

			AddCinematicMessage( 3201, 0.5 )
		</script>
	</trigger>
	<trigger	Name="trReturnMovies_cam02"	active="0">
		<event	flypath="AfterFight_cam02"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN2)
				humPlayer:SetNextForAnimation(AT_PAIN2, AT_PAIN2)
			end

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

				AddCinematicMessage( 3202, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trReturnMovies_cam03"	active="0">
		<event	flypath="AfterFight_cam03"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

				AddCinematicMessage( 3203, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trReturnMovies_cam04"	active="0">
		<event	flypath="AfterFight_cam04"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_PAIN1)
			end

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

				AddCinematicMessage( 3204, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trReturnMovies_cam05"	active="0">
		<event	flypath="AfterFight_cam05"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_PAIN1)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

				AddCinematicMessage( 3205, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trReturnMovies_cam06"	active="0">
		<event	flypath="AfterFight_cam06"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNodeAction(AT_PAIN1, AT_PAIN2)
			end

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			AddCinematicMessage( 3206, 0.25 )
			AddCinematicMessage( 3207, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trReturnMovies_msg3207"	active="0">
		<event	msgid="3207"		eventid="GE_START_CINEMATIC_MSG"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			local humPlayer = getObj("humPlayer")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end
		</script>
	</trigger>
	<trigger	Name="trReturnMovies_cam07"	active="0">
		<event	flypath="AfterVorAtSam_cam03"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNodeAction(AT_PAIN1, AT_PAIN2)
			end

			if humSem then
				humSem:SetNodeAction(AT_MOVE1)
			end

			AddCinematicMessage( 3208, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trReturnMovies_cam08"	active="0">
		<event	flypath="AfterVorAtSam_cam02"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humSem then
				humSem:SetNodeAction(AT_MOVE2)
				humSem:SetNextForAnimation(AT_MOVE2, AT_MOVE2)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			AddCinematicMessage( 3209, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trReturnMovies_cam09"	active="0">
		<event	flypath="ReturnMovies_cam01"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local tank = getObj("vehTank")

			if tank then
				tank:SetMaxSpeed(12)
				tank:SetCruisingSpeed(12)
				tank:SetExternalPathByName("tank_path01")
			end
		</script>
	</trigger>
	<trigger	Name="trReturnMovies_cam10"	active="0">
		<event	flypath="ReturnMovies_cam02"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humPlayer then
				humPlayer:SetPosition(CVector(2141.322, 351.500, 1966.110))
				humPlayer:SetRotation(Quaternion(0.000, 0.942, 0.000, 0.336))
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNodeAction(AT_PAIN1, AT_STAND2)
			end

			if humSem then
				humSem:SetPosition(CVector(2139.530, 351.500, 1965.614))
				humSem:SetRotation(Quaternion(0.000, 0.902, 0.000, 0.432))
				humSem:SetNodeAction(AT_STAND1)
				humSem:SetNextForAnimation(AT_STAND1, AT_STAND1)
			end

			AddCinematicMessage( 3301, 0.25 )
			AddCinematicMessage( 3302, 0.25 )
			AddCinematicMessage( 3303, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trReturnMovies_msg3302"	active="0">
		<event	msgid="3302"		eventid="GE_START_CINEMATIC_MSG"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			if humSem then
				humSem:SetNodeAction(AT_ATTACK1)
				humSem:SetNextForAnimation(AT_ATTACK1, AT_ATTACK1)
			end
		</script>
	</trigger>
	<trigger	Name="trReturnMovies_msg3303"	active="0">
		<event	msgid="3303"		eventid="GE_START_CINEMATIC_MSG"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humSem then
				humSem:SetNodeAction(AT_STAND1)
			end

			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_STAND1)
			end
		</script>
	</trigger>
	<trigger	Name="trReturnMovies_cam11"	active="0">
		<event	flypath="ReturnMovies_cam03"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")

			if humPlayer then humPlayer:Remove() end
			if humSem then humSem:Remove() end
		</script>
	</trigger>
	<trigger	Name="cinReturnMovies_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			local humSem = getObj("humSem")
			local tank = getObj("vehTank")

			if humPlayer then humPlayer:Remove() end
			if humSem then humSem:Remove() end
			if tank then tank:Remove() end

			CreateTeam("RobotGroup1",1118,CVector(getPos("SpawnRobotGroup1_loc")),{"Robot4SMALL","Robot4_2SMALL","NoDrop_Robot3BIG"},CVector(getPos("SpawnRobotGroup3_loc")))
			CreateTeam("RobotGroup2",1118,CVector(getPos("SpawnRobotGroup2_loc")),{"Robot4SMALL","Robot4_2SMALL","NoDrop_Robot3BIG"},CVector(getPos("SpawnRobotGroup3_loc")))
			CreateTeam("RobotGroup3",1118,CVector(getPos("SpawnRobotGroup3_loc")),{"Robot4SMALL","Robot4_2SMALL","NoDrop_Robot3BIG"},CVector(getPos("TankSpawn_loc")))

			TDeactivate("cinReturnMovies_FadeIn")
			TDeactivate("trReturnMovies_cam01")
			TDeactivate("trReturnMovies_cam02")
			TDeactivate("trReturnMovies_cam03")
			TDeactivate("trReturnMovies_cam04")
			TDeactivate("trReturnMovies_cam05")
			TDeactivate("trReturnMovies_cam06")
			TDeactivate("trReturnMovies_cam07")
			TDeactivate("trReturnMovies_cam08")
			TDeactivate("trReturnMovies_msg3207")
			TDeactivate("trReturnMovies_cam09")
			TDeactivate("trReturnMovies_cam10")
			TDeactivate("trReturnMovies_cam11")
			TDeactivate("trReturnMovies_msg3302")
			TDeactivate("trReturnMovies_msg3303")

			SetCameraBehindPlayerVehicle()

			RuleConsole("g_postEffect NoiseOff")

			RestoreAllToleranceStatus()

			TActivate("trCreateTank")
			TActivate("trRobotGroupsDie")

			AllowInfectionZoneGeneration( 0 )
		</script>
	</trigger>

<!-- -->
	<trigger	Name="cinRobotGroupsDie"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			CapturePlayerVehicle (1, "OldTank")

			local plteam = getObj("PlCarTank")
			if plteam  then
				local plcar = plteam:GetVehicle(0)
				if plcar then
					plcar:SetCustomControlEnabled(0)
					g_Player:AddChild(plcar)
				else
					LOG("TRIGGER ERROR: Cant find player car")
				end
			else
				LOG("TRIGGER ERROR: Cant find player team")
			end

			Fly("RobotGroupsDie_cam01", CINEMATIC_NO_AIM, 0, 18, 1,1)
			StartCinematic()

			AddCinematicMessage( 3401, 0.25 )
			AddCinematicMessage( 3402, 0.25 )

			TActivate("cinRobotGroupsDie_FadeIn")
			TActivate("cinRobotGroupsDie_End")
		</script>
	</trigger>
	<trigger	Name="cinRobotGroupsDie_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOn")

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetThrottle( 0 )
				Plf:SetCustomLinearVelocity( 0 )
				Plf:setGodMode(0)
				Plf:SetPosition(CVector(getPos("TankSpawn_loc")))
			end

			CreateVehicleEx ( "Tank01", "StazTank", CVector(2147.519, 342.333, 1948.975), 1100)
			local tank = getObj("StazTank")
			if tank then 
				tank:SetSkin ( 0 )
				tank:SetRotation(Quaternion(0.003, 0.899, -0.011, 0.437))
			end

			TActivate("trTankDie")
		</script>
	</trigger>
	<trigger	Name="trTankDie"	active="0">
		<event	timeout="2"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			local tank = getObj("StazTank")
			if tank then	tank:SoftDeath() end
		</script>
	</trigger>
	<trigger	Name="cinRobotGroupsDie_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			TDeactivate("cinRobotGroupsDie")

			SetCameraBehindPlayerVehicle()

			RestoreAllToleranceStatus()

			RuleConsole("g_postEffect NoiseOff")

			AllowInfectionZoneGeneration( 1 )
		</script>
	</trigger>





<!-- 53.	Последний разговор с Сэмом перед боем. -->
	<trigger	Name="cinFinal2"	active="0">
		<event	timeout="0"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			TActivate("cinFinal2_FadeIn")

			Fly("Final2_cam01", CINEMATIC_NO_AIM, 0, 5, 1, 0 )
			Fly("Final2_cam02", CINEMATIC_NO_AIM, 0, 5, 0, 0 )
			Fly("Final2_cam03", CINEMATIC_NO_AIM, 0, 4, 0, 0 )
			Fly("Final2_cam04", CINEMATIC_NO_AIM, 0, 8, 0, 0 )
			Fly("Final2_cam05", CINEMATIC_NO_AIM, 0, 12, 0, 0 )
			Fly("Final2_cam06", CINEMATIC_NO_AIM, 0, 19, 0, 0 )
			Fly("Final2_cam07", CINEMATIC_NO_AIM, 0, 7, 0, 0 )
			Fly("Final2_cam08", CINEMATIC_NO_AIM, 0, 4, 0, 1 )
			StartCinematic()
			UpdateCinematic( 1 )

			TActivate("trFinal2_cam03")
			TActivate("trFinal2_cam04")
			TActivate("trFinal2_cam05")
			TActivate("trFinal2_cam06")
			TActivate("trFinal2_cam07")
			TActivate("trFinal2_cam08")
			TActivate("cinFinal2_end")
		</script>
	</trigger>
	<trigger	Name="cinFinal2_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			SetWeather (0)
			SetGameTime (20,0)

			AddPlayerGunsWithRandomAffix ("vulcan01",1,10,"vulcan01")

			RuleConsole("g_postEffect NoiseOn")

			local bossp = GetEntityByName("Boss5")
			if bossp then
				bossp:SetPosition(CVector(2142.701, 403.425, 2995.390))
				bossp:SetRotation(Quaternion(0.000, -0.684, 0.000, 0.730))
			end

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetGamePositionOnGround(CVector(2451.067, 400.537, 3219.262))
				Plf:SetRotation(Quaternion(0.000, -0.967, 0.000, 0.255))
				Plf:SetExternalPathByName("Player_path01")
			end

			CreateNewDummyObject( "dweller_sam", "humSem", -1, -1, CVector(2151.689, 413.350, 2994.831), Quaternion(0.000, 0.753, 0.000, 0.658), 0)
		</script>
	</trigger>
	<trigger	Name="trFinal2_cam03"	active="0">
		<event	flypath="Final2_cam03"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			CreateNewDummyObject( "dweller_new_hero", "humPlayer", -1, -1, CVector(2204.130, 400.783, 2993.859), Quaternion(0.000, -0.707, 0.000, 0.707), 0)
			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetCustomControlEnabled(true)
				Plf:PlaceToEndOfPath("Player_path01")
				Plf:SetCustomControlEnabled(false)
			end

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_PAIN1)
			end

			AddCinematicMessage( 5301, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trFinal2_cam04"	active="0">
		<event	flypath="Final2_cam04"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			local humSem = getObj("humSem")
			if humSem then
				humSem:SetNodeAction(AT_ATTACK1)
				humSem:SetNextForAnimation(AT_ATTACK1, AT_ATTACK1)
			end

			AddCinematicMessage( 5302, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trFinal2_cam05"	active="0">
		<event	flypath="Final2_cam05"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			if humSem then
				humSem:SetNodeAction(AT_STAND1)
			end

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_PAIN2)
				humPlayer:SetNextForAnimation(AT_PAIN2, AT_PAIN1)
			end

			AddCinematicMessage( 5303, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trFinal2_cam06"	active="0">
		<event	flypath="Final2_cam06"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")

			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)

			end

			local humSem = getObj("humSem")
			if humSem then
				humSem:SetNodeAction(AT_ATTACK1)
				humSem:SetNextForAnimation(AT_ATTACK1, AT_ATTACK1)
			end

			AddCinematicMessage( 5304, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trFinal2_cam07"	active="0">
		<event	flypath="Final2_cam07"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			if humSem then
				humSem:SetNodeAction(AT_STAND1)
			end

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_PAIN2)
			end

			AddCinematicMessage( 5305, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trFinal2_cam08"	active="0">
		<event	flypath="Final2_cam08"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			local humSem = getObj("humSem")
			if humSem then
				humSem:SetNodeAction(AT_ATTACK2)
				humSem:SetNextForAnimation(AT_ATTACK2, AT_ATTACK1)
			end

			AddCinematicMessage( 5306, 0.25 )
		</script>
	</trigger>
	<trigger	Name="cinFinal2_end"	active="0">
		<event eventid="GE_END_CINEMATIC"	ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOff")
			RestoreAllToleranceStatus()

			local humPlayer = getObj("humPlayer")
			if humPlayer then humPlayer:Remove() end

			local humSem = getObj("humSem")
			if humSem then humSem:Remove() end

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetExternalPathByName("Player_path01")
				Plf:PlaceToEndOfPath("Player_path01")
			end

			TDeactivate("trFinal2_cam03")
			TDeactivate("trFinal2_cam04")
			TDeactivate("trFinal2_cam05")
			TDeactivate("trFinal2_cam06")
			TDeactivate("trFinal2_cam07")
			TDeactivate("trFinal2_cam08")

			SetCameraBehindPlayerVehicle()

			local bossp = GetEntityByName("Boss5")
			if bossp then
				bossp:Activate()
				bossp:StartMoving()
				ShowBossIndicator(bossp:GetId())
			end

			TActivate("trNearBossDie")
			TActivate("trNearBossMoveRadar")

			AllowInfectionZoneGeneration( 0 )
		</script>
	</trigger>



<!-- 54.	Финальный ролик 1. -->
	<trigger	Name="cinFinal1"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			Fly("Final1_cam01", CINEMATIC_NO_AIM, nil, 7, 1, 0, 1, 0, 0)
			Fly("Final1_cam011", CINEMATIC_NO_AIM, nil, 0.1, 0, 0, 1, 0, 0)
			Fly("Final1_cam02", CINEMATIC_NO_AIM, nil, 8, 0, 0, 1, 0, 0)
			Fly("Final1_cam021", CINEMATIC_NO_AIM, nil, 0.1, 0, 0, 1, 0, 0)
			Fly("Final1_cam03", CINEMATIC_NO_AIM, nil, 9, 0, 1, 1, 0, 0)
			StartCinematic()

			TActivate("cinFinal1_FadeIn")
			TActivate("trFinal1_cam02")
			TActivate("trFinal1_cam03")
			TActivate("cinFinal1_End")
		</script>
	</trigger>
	<trigger	Name="cinFinal1_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			CreateNewDummyObject( "dweller_new_hero", "humPlayer", -1, -1, CVector(2001.898, 542.557, 1930.171), Quaternion(0.000, -0.760, 0.000, 0.649), 0)

			RuleConsole("g_postEffect NoiseOn")

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetThrottle( 0 )
				Plf:SetCustomLinearVelocity( 0 )
			end

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_BLOCK1)
				humPlayer:SetNextForAnimation(AT_BLOCK1, AT_BLOCK1)
			end

			AddCinematicMessage( 5401, 0.5 )
		</script>
	</trigger>
	<trigger	Name="trFinal1_cam02"	active="0">
		<event	flypath="Final1_cam02"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			AddCinematicMessage( 5402, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trFinal1_cam03"	active="0">
		<event	flypath="Final1_cam03"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_BLOCK2)
				humPlayer:SetNextForAnimation(AT_BLOCK2, AT_BLOCK1)
			end

			AddCinematicMessage( 5403, 0.25 )
		</script>
	</trigger>
	<trigger	Name="cinFinal1_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then humPlayer:Remove() end

			TDeactivate("cinFinal1")
			TDeactivate("cinFinal1_FadeIn")
			TDeactivate("trFinal1_cam02")
			TDeactivate("trFinal1_cam03")

			RuleConsole("g_postEffect NoiseOff")

			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()
-- sin
			local i = 0
			local s = 0

		    	for i = 1,10 do
				if IsQuestItemPresent( "collectionbook"..i ) then s=s+1 end
			end

			if s==10 then
				SpawnMessageBox( 9010 )
				PassToMap("sin", "Sin_Start_loc", 0 )
			else
				SpawnMessageBox( 9000+s )
				ShowDeathMenu()
			end
		</script>
	</trigger>





<!-- 60.	Финальный ролик 2. Последний разговор с Сэмом на Существе. -->
	<trigger	Name="cinFinal3"	active="0">
		<event	timeout="0"		eventid="GE_TIME_PERIOD" />
		<script>
			trigger:Deactivate()

			SaveAllToleranceStatus(RS_NEUTRAL)

			TActivate("cinFinal3_FadeIn")

			Fly("Final2_cam01", CINEMATIC_NO_AIM, 0, 10, 1, 0 )
			Fly("Final2_cam02", CINEMATIC_NO_AIM, 0, 10, 0, 0 )
			Fly("Final2_cam03", CINEMATIC_NO_AIM, 0, 4, 0, 0 )
			Fly("Final2_cam04", CINEMATIC_NO_AIM, 0, 8, 0, 0 )
			Fly("Final2_cam05", CINEMATIC_NO_AIM, 0, 12, 0, 0 )
			Fly("Final2_cam06", CINEMATIC_NO_AIM, 0, 11, 0, 0 )
			Fly("Final2_cam07", CINEMATIC_NO_AIM, 0, 9, 0, 0 )
			Fly("Final2_cam08", CINEMATIC_NO_AIM, 0, 19, 0, 0 )
			Fly("BlackCam", CINEMATIC_NO_AIM, 0, 2, 0, 0 )
			Fly("Final1_cam01", CINEMATIC_NO_AIM, nil, 8, 0, 0, 1, 0, 0)
			Fly("Final1_cam011", CINEMATIC_NO_AIM, nil, 0.1, 0, 0, 1, 0, 0)
			Fly("Final1_cam02", CINEMATIC_NO_AIM, nil, 9, 0, 0, 1, 0, 0)
			Fly("Final1_cam021", CINEMATIC_NO_AIM, nil, 0.1, 0, 0, 1, 0, 0)
			Fly("Final1_cam03", CINEMATIC_NO_AIM, nil, 11, 0, 1, 1, 0, 0)
			StartCinematic()
			UpdateCinematic( 1 )

			TActivate("trFinal3_cam03")
			TActivate("trFinal3_cam04")
			TActivate("trFinal3_cam05")
			TActivate("trFinal3_cam06")
			TActivate("trFinal3_cam07")
			TActivate("trFinal3_cam08")
			TActivate("trFinal4_cam01")
			TActivate("trFinal4_cam02")
			TActivate("trFinal4_cam03")
			TActivate("cinFinal4_End")
		</script>
	</trigger>
	<trigger	Name="cinFinal3_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			SetWeather (0)
			SetGameTime (20,0)

			RuleConsole("g_postEffect NoiseOn")

			CreateNewDummyObject("dweller_new_hero","humPlayer1",-1,-1,CVector(2001.898,542.557,1930.171),Quaternion(0.000,-0.760,0.000,0.649),0)
			CreateNewDummyObject("dweller_sam","humSem1",-1,-1,CVector(1997.710,541.150,1928.446),Quaternion(0.000,-0.707,0.000,0.707),0)

			CreateNewDummyObject("MonsterBeast2","beast",-1,-1,CVector(2145.707,400.000,2996.936),Quaternion(0.0000,-0.5057,0.0000,0.8627),0)
			local S = getObj("beast")
			if S then S:SetScale(1.813) end

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetPosition(CVector(2451.067, 400.537, 3219.262))
				Plf:SetRotation(Quaternion(0.000, -0.967, 0.000, 0.255))
				Plf:SetExternalPathByName("Player_path01")
			end

			CreateNewDummyObject( "dweller_sam", "humSem", -1, -1, CVector(2151.689, 413.350, 2994.831), Quaternion(0.000, 0.753, 0.000, 0.658), 0)
		</script>
	</trigger>
	<trigger	Name="trFinal3_cam03"	active="0">
		<event	flypath="Final2_cam03"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			CreateNewDummyObject( "dweller_new_hero", "humPlayer", -1, -1, CVector(2204.130, 400.783, 2993.859), Quaternion(0.000, -0.707, 0.000, 0.707), 0)
			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetCustomControlEnabled(true)
				Plf:PlaceToEndOfPath("Player_path01")
				Plf:SetCustomControlEnabled(false)
			end

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_PAIN1)
			end

			AddCinematicMessage( 6001, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trFinal3_cam04"	active="0">
		<event	flypath="Final2_cam04"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			local humSem = getObj("humSem")
			if humSem then
				humSem:SetNodeAction(AT_ATTACK1)
				humSem:SetNextForAnimation(AT_ATTACK1, AT_ATTACK1)
			end

			AddCinematicMessage( 6002, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trFinal3_cam05"	active="0">
		<event	flypath="Final2_cam05"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()
			local humSem = getObj("humSem")
			if humSem then
				humSem:SetNodeAction(AT_STAND1)
			end

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_PAIN2)
				humPlayer:SetNextForAnimation(AT_PAIN2, AT_PAIN1)
			end

			AddCinematicMessage( 6003, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trFinal3_cam06"	active="0">
		<event	flypath="Final2_cam06"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			local humSem = getObj("humSem")
			if humSem then
				humSem:SetNodeAction(AT_ATTACK1)
				humSem:SetNextForAnimation(AT_ATTACK1, AT_ATTACK1)
			end

			AddCinematicMessage( 6004, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trFinal3_cam07"	active="0">
		<event	flypath="Final2_cam07"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()
			local humSem = getObj("humSem")
			if humSem then
				humSem:SetNodeAction(AT_STAND1)
			end

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_PAIN1)
				humPlayer:SetNextForAnimation(AT_PAIN1, AT_PAIN2)
			end

			AddCinematicMessage( 6005, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trFinal3_cam08"	active="0">
		<event	flypath="Final2_cam08"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem")
			if humSem then
				humSem:SetNodeAction(AT_ATTACK2)
				humSem:SetNextForAnimation(AT_ATTACK2, AT_ATTACK1)
			end

			local humPlayer = getObj("humPlayer")
			if humPlayer then
				humPlayer:SetNodeAction(AT_STAND1)
			end

			AddCinematicMessage( 6006, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trFinal4_cam01"	active="0">
		<event	flypath="Final1_cam01"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer1")
			if humPlayer then
				humPlayer:SetNodeAction(AT_BLOCK1)
				humPlayer:SetNextForAnimation(AT_BLOCK1, AT_BLOCK1)
			end

			AddCinematicMessage( 6101, 0.25 )
		</script>
	</trigger>

	<trigger	Name="trFinal4_cam02"	active="0">
		<event	flypath="Final1_cam02"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			AddCinematicMessage( 6102, 0.25 )
		</script>
	</trigger>
	<trigger	Name="trFinal4_cam03"	active="0">
		<event	flypath="Final1_cam03"		eventid="GE_START_CINEMATIC_FLY"	ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humSem = getObj("humSem1")
			if humSem then
				humSem:SetNodeAction(AT_ATTACK1)
				humSem:SetNextForAnimation(AT_ATTACK1, AT_STAND1)
			end

			local humPlayer = getObj("humPlayer1")
			if humPlayer then
				humPlayer:SetNodeAction(AT_BLOCK2)
				humPlayer:SetNextForAnimation(AT_BLOCK2, AT_BLOCK1)
			end

			AddCinematicMessage( 6103, 0.25 )
		</script>
	</trigger>
	<trigger	Name="cinFinal4_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			local humPlayer = getObj("humPlayer")
			if humPlayer then humPlayer:Remove() end

			local humSem = getObj("humSem")
			if humSem then humSem:Remove() end

			local humSem1 = getObj("humSem1")
			if humSem1 then humSem1:Remove() end

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetExternalPathByName("Player_path01")
				Plf:PlaceToEndOfPath("Player_path01")
			end

			local humPlayer = getObj("humPlayer1")
			if humPlayer then humPlayer:Remove() end

			local humb = getObj("beast")
			if humb then humb:Remove() end

			TDeactivate("trFinal3_cam02")
			TDeactivate("trFinal3_cam03")
			TDeactivate("trFinal3_cam04")
			TDeactivate("trFinal3_cam05")
			TDeactivate("trFinal3_cam06")
			TDeactivate("trFinal3_cam07")
			TDeactivate("trFinal3_cam08")
			TDeactivate("trFinal4_cam01")
			TDeactivate("trFinal4_cam02")
			TDeactivate("trFinal4_cam03")

			RuleConsole("g_postEffect NoiseOff")
			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

-- sin
			local i = 0
			local s = 0

		    	for i = 1,10 do
				if IsQuestItemPresent( "collectionbook"..i ) then s=s+1 end
			end

			if s==10 then
				SpawnMessageBox( 9010 )
				PassToMap("sin", "Sin_Start_loc", 0 )
			else
				SpawnMessageBox( 9000+s )
				ShowDeathMenu()
			end
		</script>
	</trigger>
</triggers>